<div class="header-buildings">
  <p class="button-navigation" id="previous">< previous</p>
  <p class="button-navigation" id="next">next ></p>
</div>

<% @buildings.each do |building| %>
  <div class="building-index">
    <h1><%= building.address %></h1>
      <div class="top-cards">
        <div class="information">
          <h3>Information</h3>
          <div id="home-page-info">
            <p>Number of Units: <%= building.units.count %></p>
            <p>Owner since: <%= building.purchase_date %></p>
            <p>Purchase price: <%= number_to_currency(building.purchase_price, precision: 0) %></p>
            <p>Overall expenses: <%= number_to_currency(Task.calculate_overall_expenses_for_building(building)) %></p>
            <p>Taxes to pay this year: <%= number_to_currency(building.taxes) %></p>
          </div>
        </div>
        <div class="accounting">
          <h3>Accounting</h3>
          <table class="building-accounting">
            <thead>
              <tr>
                <th>Income</th>
                <th> August 20</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Rental Income</td>
                <td>
                  <%= number_to_currency(Unit.calculate_income(building)) %>
                </td>
              </tr>
              <tr>
                <th colspan="2">Expenses</th>
              </tr>
              <tr>
                <td>Mortgage</td>
                <td><%= number_to_currency(building.mortgage) %></td>
              </tr>
              <% if building.tasks.exists? %>
                <% Task.calculate_expenses_for_building(building).each do |expense| %>
                  <tr>
                    <% expense.each do |category, expense| %>
                      <% if expense > 0 %>
                        <td><%= category %></td>
                        <td><%= number_to_currency(expense) %></td>
                      <% end %>
                    <% end %>
                  </tr>
                <% end %>
              <tr>
              <% end %>
                <th>All expenses</th>
                <th>
                  <%= number_to_currency(Task.calculate_overall_expenses_for_building(building)) %>
                </th>
              </tr>
              <th>Balance</th>
              <th><%= number_to_currency(Unit.calculate_income(building) - Task.calculate_overall_expenses_for_building(building)) %></th>
            </tbody>
          </table>
        </div>
      </div>
      <div class="bottom-cards">
        <div class="expenses">
          <h3>Expenses</h3>
          <% if building.tasks.exists? %>
            <canvas id="building-expense-chart" data-building-expense-data="<%= Task.calculate_expenses_array_for_building(building).to_json %>"></canvas>
            <%= link_to "Add a new expense", new_task_path, class:"btn btn-primary" %>
          <% else %>
            <p>No expenses yet</p>
            <%= link_to "Add an expense", new_task_path, class:"btn btn-primary" %>
          <% end %>
        </div>
        <div class="tasks-to-do col-sm-12 col-md-6">
          <h3>Tasks to do</h3>
          <ul class="list-group">
            <% if building.tasks.exists? %>
                <% building.tasks.each do |task| %>
                  <% if task.status != true %>
                    <% if task.unit != nil %>
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                          Unit <%= task.unit.unit_number %> - <%= task.title %>
                          <% if task.urgency == "High" %>
                            <span class="badge badge-info badge-pill"><%= task.urgency %></span>
                          <% elsif task.urgency == "Medium" %>
                            <span class="badge badge-primary badge-pill"><%= task.urgency %></span>
                          <% else %>
                            <span class="badge badge-warning text-white badge-pill"><%= task.urgency %></span>
                          <% end %>
                        </li>
                    <% else %>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      Building - <%= task.title %>
                      <% if task.urgency == "High" %>
                        <span class="badge badge-info badge-pill"><%= task.urgency %></span>
                      <% elsif task.urgency == "Medium" %>
                        <span class="badge badge-primary badge-pill"><%= task.urgency %></span>
                      <% else %>
                        <span class="badge badge-warning text-white badge-pill"><%= task.urgency %></span>
                      <% end %>
                    </li>
                    <% end %>
                  <% end %>
            </ul>
            <% end %>
              <%= link_to "Add a new task", new_task_path, class:"btn btn-primary" %>
              </ul>
              <% else %>
              <%= link_to "Add a task", new_task_path, class:"btn btn-primary" %>
            <% end %>
        </div>
      </div>

  <% if building.units.count > 0 %>
    <h3>Units</h3>
  <% end %>

  <div class="collapse-menu">
      <% building.units.each do |unit| %>
        <div class="dropdown">
          <button class="btn accordion col-12 d-flex justify-content-between">
            <%= unit.unit_number%>
            <i class="fas fa-chevron-down"></i>
          </button>
        <div class="panel">
              <div class="card-deck">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Information</h5>
                <p class="card-text">Type: 3.5</p>
                <p class="card-text">Lease end date: <%= unit.renewal_date %></p>
                <p class="card-text">Purchase price: $<%= unit.purchase_price %></p>
                <p class="card-text">Rent: $<%= unit.rent_amount %></p>
                <%= link_to "Edit the unit", building_unit_path(building, unit), class:"btn btn-primary" %>
              </div>
            </div>
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Expenses</h5>
                <svg width="154" height="154" viewBox="0 0 154 154" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M77.0204 76.9911L35.0718 12.4179C47.9313 4.08018 61.6777 2.70689e-06 77.0204 2.70689e-06V76.9911Z" fill="#D4D4D4"/>
                  <path d="M77.0204 76.9917L0.572732 67.5895C3.49938 43.9068 15.1173 25.3686 35.0717 12.4185L77.0204 76.9917Z" fill="#6CD3F3"/>
                  <path d="M77.0206 76.991L63.629 152.829C23.4541 145.733 -4.39349 108.125 0.572945 67.5889L77.0206 76.991Z" fill="#009BA5"/>
                  <path d="M77.0207 76.9912L153.912 80.9827C151.695 123.47 115.422 156.111 72.9411 153.894C69.571 153.716 66.9104 153.45 63.629 152.829L77.0207 76.9912Z" fill="#00486E"/>
                  <path d="M77.0203 76.9911V2.70689e-06C119.59 2.70689e-06 154 34.5041 154 76.9911C154 78.6764 154 79.2973 153.911 80.9826L77.0203 76.9911Z" fill="#00486E"/>
                </svg>
                <svg width="17" height="118" viewBox="0 0 17 118" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <rect y="0.244629" width="16.6823" height="18.6791" rx="3" fill="#00486E"/>
                  <path d="M0 35.7461C0 34.0892 1.34315 32.7461 3 32.7461H13.6823C15.3391 32.7461 16.6823 34.0892 16.6823 35.7461V48.4253C16.6823 50.0821 15.3391 51.4253 13.6823 51.4253H3C1.34315 51.4253 0 50.0821 0 48.4253V35.7461Z" fill="#009BA5"/>
                  <rect y="68.6104" width="16.6823" height="18.679" rx="3" fill="#6CD3F3"/>
                  <rect y="98.8701" width="16.6823" height="18.6788" rx="3" fill="#D4D4D4"/>
                </svg>
                <svg width="124" height="121" viewBox="0 0 124 121" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M3.66504 4.20312L7.84863 14.6445L12.0322 4.20312H14.2207V17H12.5332V12.0166L12.6914 6.6377L8.49023 17H7.19824L3.00586 6.66406L3.17285 12.0166V17H1.48535V4.20312H3.66504ZM16.5146 12.1572C16.5146 11.2256 16.6963 10.3877 17.0596 9.64355C17.4287 8.89941 17.9385 8.3252 18.5889 7.9209C19.2451 7.5166 19.9922 7.31445 20.8301 7.31445C22.125 7.31445 23.1709 7.7627 23.9678 8.65918C24.7705 9.55566 25.1719 10.748 25.1719 12.2363V12.3506C25.1719 13.2764 24.9932 14.1084 24.6357 14.8467C24.2842 15.5791 23.7773 16.1504 23.1152 16.5605C22.459 16.9707 21.7031 17.1758 20.8477 17.1758C19.5586 17.1758 18.5127 16.7275 17.71 15.8311C16.9131 14.9346 16.5146 13.748 16.5146 12.2715V12.1572ZM18.1494 12.3506C18.1494 13.4053 18.3926 14.252 18.8789 14.8906C19.3711 15.5293 20.0273 15.8486 20.8477 15.8486C21.6738 15.8486 22.3301 15.5264 22.8164 14.8818C23.3027 14.2314 23.5459 13.3232 23.5459 12.1572C23.5459 11.1143 23.2969 10.2705 22.7988 9.62598C22.3066 8.97559 21.6504 8.65039 20.8301 8.65039C20.0273 8.65039 19.3799 8.96973 18.8877 9.6084C18.3955 10.2471 18.1494 11.1611 18.1494 12.3506ZM31.8076 8.94922C31.5615 8.9082 31.2949 8.8877 31.0078 8.8877C29.9414 8.8877 29.2178 9.3418 28.8369 10.25V17H27.2109V7.49023H28.793L28.8193 8.58887C29.3525 7.73926 30.1084 7.31445 31.0869 7.31445C31.4033 7.31445 31.6436 7.35547 31.8076 7.4375V8.94922ZM35.9561 5.1875V7.49023H37.7314V8.74707H35.9561V14.6445C35.9561 15.0254 36.0352 15.3125 36.1934 15.5059C36.3516 15.6934 36.6211 15.7871 37.002 15.7871C37.1895 15.7871 37.4473 15.752 37.7754 15.6816V17C37.3477 17.1172 36.9316 17.1758 36.5273 17.1758C35.8008 17.1758 35.2529 16.9561 34.8838 16.5166C34.5146 16.0771 34.3301 15.4531 34.3301 14.6445V8.74707H32.5986V7.49023H34.3301V5.1875H35.9561ZM39.252 12.166C39.252 10.6836 39.5947 9.50586 40.2803 8.63281C40.9658 7.75391 41.874 7.31445 43.0049 7.31445C44.165 7.31445 45.0703 7.72461 45.7207 8.54492L45.7998 7.49023H47.2852V16.7715C47.2852 18.002 46.9189 18.9717 46.1865 19.6807C45.46 20.3896 44.4814 20.7441 43.251 20.7441C42.5654 20.7441 41.8945 20.5977 41.2383 20.3047C40.582 20.0117 40.0811 19.6104 39.7354 19.1006L40.5791 18.125C41.2764 18.9863 42.1289 19.417 43.1367 19.417C43.9277 19.417 44.543 19.1943 44.9824 18.749C45.4277 18.3037 45.6504 17.6768 45.6504 16.8682V16.0508C45 16.8008 44.1123 17.1758 42.9873 17.1758C41.874 17.1758 40.9717 16.7275 40.2803 15.8311C39.5947 14.9346 39.252 13.7129 39.252 12.166ZM40.8867 12.3506C40.8867 13.4229 41.1064 14.2666 41.5459 14.8818C41.9854 15.4912 42.6006 15.7959 43.3916 15.7959C44.417 15.7959 45.1699 15.3301 45.6504 14.3984V10.0566C45.1523 9.14844 44.4053 8.69434 43.4092 8.69434C42.6182 8.69434 42 9.00195 41.5547 9.61719C41.1094 10.2324 40.8867 11.1436 40.8867 12.3506ZM55.6172 17C55.5234 16.8125 55.4473 16.4785 55.3887 15.998C54.6328 16.7832 53.7305 17.1758 52.6816 17.1758C51.7441 17.1758 50.9736 16.9121 50.3701 16.3848C49.7725 15.8516 49.4736 15.1777 49.4736 14.3633C49.4736 13.373 49.8486 12.6055 50.5986 12.0605C51.3545 11.5098 52.415 11.2344 53.7803 11.2344H55.3623V10.4873C55.3623 9.91895 55.1924 9.46777 54.8525 9.13379C54.5127 8.79395 54.0117 8.62402 53.3496 8.62402C52.7695 8.62402 52.2832 8.77051 51.8906 9.06348C51.498 9.35645 51.3018 9.71094 51.3018 10.127H49.667C49.667 9.65234 49.834 9.19531 50.168 8.75586C50.5078 8.31055 50.9648 7.95898 51.5391 7.70117C52.1191 7.44336 52.7549 7.31445 53.4463 7.31445C54.542 7.31445 55.4004 7.58984 56.0215 8.14062C56.6426 8.68555 56.9648 9.43848 56.9883 10.3994V14.7764C56.9883 15.6494 57.0996 16.3438 57.3223 16.8594V17H55.6172ZM52.9189 15.7607C53.4287 15.7607 53.9121 15.6289 54.3691 15.3652C54.8262 15.1016 55.1572 14.7588 55.3623 14.3369V12.3857H54.0879C52.0957 12.3857 51.0996 12.9688 51.0996 14.1348C51.0996 14.6445 51.2695 15.043 51.6094 15.3301C51.9492 15.6172 52.3857 15.7607 52.9189 15.7607ZM59.1504 12.166C59.1504 10.6836 59.4932 9.50586 60.1787 8.63281C60.8643 7.75391 61.7725 7.31445 62.9033 7.31445C64.0635 7.31445 64.9688 7.72461 65.6191 8.54492L65.6982 7.49023H67.1836V16.7715C67.1836 18.002 66.8174 18.9717 66.085 19.6807C65.3584 20.3896 64.3799 20.7441 63.1494 20.7441C62.4639 20.7441 61.793 20.5977 61.1367 20.3047C60.4805 20.0117 59.9795 19.6104 59.6338 19.1006L60.4775 18.125C61.1748 18.9863 62.0273 19.417 63.0352 19.417C63.8262 19.417 64.4414 19.1943 64.8809 18.749C65.3262 18.3037 65.5488 17.6768 65.5488 16.8682V16.0508C64.8984 16.8008 64.0107 17.1758 62.8857 17.1758C61.7725 17.1758 60.8701 16.7275 60.1787 15.8311C59.4932 14.9346 59.1504 13.7129 59.1504 12.166ZM60.7852 12.3506C60.7852 13.4229 61.0049 14.2666 61.4443 14.8818C61.8838 15.4912 62.499 15.7959 63.29 15.7959C64.3154 15.7959 65.0684 15.3301 65.5488 14.3984V10.0566C65.0508 9.14844 64.3037 8.69434 63.3076 8.69434C62.5166 8.69434 61.8984 9.00195 61.4531 9.61719C61.0078 10.2324 60.7852 11.1436 60.7852 12.3506ZM73.5908 17.1758C72.3018 17.1758 71.2529 16.7539 70.4443 15.9102C69.6357 15.0605 69.2314 13.9268 69.2314 12.5088V12.21C69.2314 11.2666 69.4102 10.4258 69.7676 9.6875C70.1309 8.94336 70.6348 8.36328 71.2793 7.94727C71.9297 7.52539 72.6328 7.31445 73.3887 7.31445C74.625 7.31445 75.5859 7.72168 76.2715 8.53613C76.957 9.35059 77.2998 10.5166 77.2998 12.0342V12.7109H70.8574C70.8809 13.6484 71.1533 14.4072 71.6748 14.9873C72.2021 15.5615 72.8701 15.8486 73.6787 15.8486C74.2529 15.8486 74.7393 15.7314 75.1377 15.4971C75.5361 15.2627 75.8848 14.9521 76.1836 14.5654L77.1768 15.3389C76.3799 16.5635 75.1846 17.1758 73.5908 17.1758ZM73.3887 8.65039C72.7324 8.65039 72.1816 8.89062 71.7363 9.37109C71.291 9.8457 71.0156 10.5137 70.9102 11.375H75.6738V11.252C75.627 10.4258 75.4043 9.78711 75.0059 9.33594C74.6074 8.87891 74.0684 8.65039 73.3887 8.65039ZM6.17871 42.8232H3.17285V48H1.47656V35.2031H5.71289C7.1543 35.2031 8.26172 35.5312 9.03516 36.1875C9.81445 36.8438 10.2041 37.7988 10.2041 39.0527C10.2041 39.8496 9.9873 40.5439 9.55371 41.1357C9.12598 41.7275 8.52832 42.1699 7.76074 42.4629L10.7666 47.8945V48H8.95605L6.17871 42.8232ZM3.17285 41.4434H5.76562C6.60352 41.4434 7.26855 41.2266 7.76074 40.793C8.25879 40.3594 8.50781 39.7793 8.50781 39.0527C8.50781 38.2617 8.27051 37.6553 7.7959 37.2334C7.32715 36.8115 6.64746 36.5977 5.75684 36.5918H3.17285V41.4434ZM16.2686 48.1758C14.9795 48.1758 13.9307 47.7539 13.1221 46.9102C12.3135 46.0605 11.9092 44.9268 11.9092 43.5088V43.21C11.9092 42.2666 12.0879 41.4258 12.4453 40.6875C12.8086 39.9434 13.3125 39.3633 13.957 38.9473C14.6074 38.5254 15.3105 38.3145 16.0664 38.3145C17.3027 38.3145 18.2637 38.7217 18.9492 39.5361C19.6348 40.3506 19.9775 41.5166 19.9775 43.0342V43.7109H13.5352C13.5586 44.6484 13.8311 45.4072 14.3525 45.9873C14.8799 46.5615 15.5479 46.8486 16.3564 46.8486C16.9307 46.8486 17.417 46.7314 17.8154 46.4971C18.2139 46.2627 18.5625 45.9521 18.8613 45.5654L19.8545 46.3389C19.0576 47.5635 17.8623 48.1758 16.2686 48.1758ZM16.0664 39.6504C15.4102 39.6504 14.8594 39.8906 14.4141 40.3711C13.9688 40.8457 13.6934 41.5137 13.5879 42.375H18.3516V42.252C18.3047 41.4258 18.082 40.7871 17.6836 40.3359C17.2852 39.8789 16.7461 39.6504 16.0664 39.6504ZM23.4053 38.4902L23.458 39.6855C24.1846 38.7715 25.1338 38.3145 26.3057 38.3145C28.3154 38.3145 29.3291 39.4482 29.3467 41.7158V48H27.7207V41.707C27.7148 41.0215 27.5566 40.5146 27.2461 40.1865C26.9414 39.8584 26.4639 39.6943 25.8135 39.6943C25.2861 39.6943 24.8232 39.835 24.4248 40.1162C24.0264 40.3975 23.7158 40.7666 23.4932 41.2236V48H21.8672V38.4902H23.4053ZM31.3682 43.1572C31.3682 42.2256 31.5498 41.3877 31.9131 40.6436C32.2822 39.8994 32.792 39.3252 33.4424 38.9209C34.0986 38.5166 34.8457 38.3145 35.6836 38.3145C36.9785 38.3145 38.0244 38.7627 38.8213 39.6592C39.624 40.5557 40.0254 41.748 40.0254 43.2363V43.3506C40.0254 44.2764 39.8467 45.1084 39.4893 45.8467C39.1377 46.5791 38.6309 47.1504 37.9688 47.5605C37.3125 47.9707 36.5566 48.1758 35.7012 48.1758C34.4121 48.1758 33.3662 47.7275 32.5635 46.8311C31.7666 45.9346 31.3682 44.748 31.3682 43.2715V43.1572ZM33.0029 43.3506C33.0029 44.4053 33.2461 45.252 33.7324 45.8906C34.2246 46.5293 34.8809 46.8486 35.7012 46.8486C36.5273 46.8486 37.1836 46.5264 37.6699 45.8818C38.1562 45.2314 38.3994 44.3232 38.3994 43.1572C38.3994 42.1143 38.1504 41.2705 37.6523 40.626C37.1602 39.9756 36.5039 39.6504 35.6836 39.6504C34.8809 39.6504 34.2334 39.9697 33.7412 40.6084C33.249 41.2471 33.0029 42.1611 33.0029 43.3506ZM45.0615 45.7939L47.417 38.4902H49.0781L45.668 48H44.4287L40.9834 38.4902H42.6445L45.0615 45.7939ZM56.373 48C56.2793 47.8125 56.2031 47.4785 56.1445 46.998C55.3887 47.7832 54.4863 48.1758 53.4375 48.1758C52.5 48.1758 51.7295 47.9121 51.126 47.3848C50.5283 46.8516 50.2295 46.1777 50.2295 45.3633C50.2295 44.373 50.6045 43.6055 51.3545 43.0605C52.1104 42.5098 53.1709 42.2344 54.5361 42.2344H56.1182V41.4873C56.1182 40.9189 55.9482 40.4678 55.6084 40.1338C55.2686 39.7939 54.7676 39.624 54.1055 39.624C53.5254 39.624 53.0391 39.7705 52.6465 40.0635C52.2539 40.3564 52.0576 40.7109 52.0576 41.127H50.4229C50.4229 40.6523 50.5898 40.1953 50.9238 39.7559C51.2637 39.3105 51.7207 38.959 52.2949 38.7012C52.875 38.4434 53.5107 38.3145 54.2021 38.3145C55.2979 38.3145 56.1562 38.5898 56.7773 39.1406C57.3984 39.6855 57.7207 40.4385 57.7441 41.3994V45.7764C57.7441 46.6494 57.8555 47.3438 58.0781 47.8594V48H56.373ZM53.6748 46.7607C54.1846 46.7607 54.668 46.6289 55.125 46.3652C55.582 46.1016 55.9131 45.7588 56.1182 45.3369V43.3857H54.8438C52.8516 43.3857 51.8555 43.9688 51.8555 45.1348C51.8555 45.6445 52.0254 46.043 52.3652 46.3301C52.7051 46.6172 53.1416 46.7607 53.6748 46.7607ZM62.499 36.1875V38.4902H64.2744V39.7471H62.499V45.6445C62.499 46.0254 62.5781 46.3125 62.7363 46.5059C62.8945 46.6934 63.1641 46.7871 63.5449 46.7871C63.7324 46.7871 63.9902 46.752 64.3184 46.6816V48C63.8906 48.1172 63.4746 48.1758 63.0703 48.1758C62.3438 48.1758 61.7959 47.9561 61.4268 47.5166C61.0576 47.0771 60.873 46.4531 60.873 45.6445V39.7471H59.1416V38.4902H60.873V36.1875H62.499ZM67.9482 48H66.3223V38.4902H67.9482V48ZM66.1904 35.9678C66.1904 35.7041 66.2695 35.4814 66.4277 35.2998C66.5918 35.1182 66.832 35.0273 67.1484 35.0273C67.4648 35.0273 67.7051 35.1182 67.8691 35.2998C68.0332 35.4814 68.1152 35.7041 68.1152 35.9678C68.1152 36.2314 68.0332 36.4512 67.8691 36.627C67.7051 36.8027 67.4648 36.8906 67.1484 36.8906C66.832 36.8906 66.5918 36.8027 66.4277 36.627C66.2695 36.4512 66.1904 36.2314 66.1904 35.9678ZM70.1279 43.1572C70.1279 42.2256 70.3096 41.3877 70.6729 40.6436C71.042 39.8994 71.5518 39.3252 72.2021 38.9209C72.8584 38.5166 73.6055 38.3145 74.4434 38.3145C75.7383 38.3145 76.7842 38.7627 77.5811 39.6592C78.3838 40.5557 78.7852 41.748 78.7852 43.2363V43.3506C78.7852 44.2764 78.6064 45.1084 78.249 45.8467C77.8975 46.5791 77.3906 47.1504 76.7285 47.5605C76.0723 47.9707 75.3164 48.1758 74.4609 48.1758C73.1719 48.1758 72.126 47.7275 71.3232 46.8311C70.5264 45.9346 70.1279 44.748 70.1279 43.2715V43.1572ZM71.7627 43.3506C71.7627 44.4053 72.0059 45.252 72.4922 45.8906C72.9844 46.5293 73.6406 46.8486 74.4609 46.8486C75.2871 46.8486 75.9434 46.5264 76.4297 45.8818C76.916 45.2314 77.1592 44.3232 77.1592 43.1572C77.1592 42.1143 76.9102 41.2705 76.4121 40.626C75.9199 39.9756 75.2637 39.6504 74.4434 39.6504C73.6406 39.6504 72.9932 39.9697 72.501 40.6084C72.0088 41.2471 71.7627 42.1611 71.7627 43.3506ZM82.3623 38.4902L82.415 39.6855C83.1416 38.7715 84.0908 38.3145 85.2627 38.3145C87.2725 38.3145 88.2861 39.4482 88.3037 41.7158V48H86.6777V41.707C86.6719 41.0215 86.5137 40.5146 86.2031 40.1865C85.8984 39.8584 85.4209 39.6943 84.7705 39.6943C84.2432 39.6943 83.7803 39.835 83.3818 40.1162C82.9834 40.3975 82.6729 40.7666 82.4502 41.2236V48H80.8242V38.4902H82.3623ZM11.3203 79H9.62402V73.085H3.17285V79H1.48535V66.2031H3.17285V71.7051H9.62402V66.2031H11.3203V79ZM18.0088 79.1758C16.7197 79.1758 15.6709 78.7539 14.8623 77.9102C14.0537 77.0605 13.6494 75.9268 13.6494 74.5088V74.21C13.6494 73.2666 13.8281 72.4258 14.1855 71.6875C14.5488 70.9434 15.0527 70.3633 15.6973 69.9473C16.3477 69.5254 17.0508 69.3145 17.8066 69.3145C19.043 69.3145 20.0039 69.7217 20.6895 70.5361C21.375 71.3506 21.7178 72.5166 21.7178 74.0342V74.7109H15.2754C15.2988 75.6484 15.5713 76.4072 16.0928 76.9873C16.6201 77.5615 17.2881 77.8486 18.0967 77.8486C18.6709 77.8486 19.1572 77.7314 19.5557 77.4971C19.9541 77.2627 20.3027 76.9521 20.6016 76.5654L21.5947 77.3389C20.7979 78.5635 19.6025 79.1758 18.0088 79.1758ZM17.8066 70.6504C17.1504 70.6504 16.5996 70.8906 16.1543 71.3711C15.709 71.8457 15.4336 72.5137 15.3281 73.375H20.0918V73.252C20.0449 72.4258 19.8223 71.7871 19.4238 71.3359C19.0254 70.8789 18.4863 70.6504 17.8066 70.6504ZM29.4785 79C29.3848 78.8125 29.3086 78.4785 29.25 77.998C28.4941 78.7832 27.5918 79.1758 26.543 79.1758C25.6055 79.1758 24.835 78.9121 24.2314 78.3848C23.6338 77.8516 23.335 77.1777 23.335 76.3633C23.335 75.373 23.71 74.6055 24.46 74.0605C25.2158 73.5098 26.2764 73.2344 27.6416 73.2344H29.2236V72.4873C29.2236 71.9189 29.0537 71.4678 28.7139 71.1338C28.374 70.7939 27.873 70.624 27.2109 70.624C26.6309 70.624 26.1445 70.7705 25.752 71.0635C25.3594 71.3564 25.1631 71.7109 25.1631 72.127H23.5283C23.5283 71.6523 23.6953 71.1953 24.0293 70.7559C24.3691 70.3105 24.8262 69.959 25.4004 69.7012C25.9805 69.4434 26.6162 69.3145 27.3076 69.3145C28.4033 69.3145 29.2617 69.5898 29.8828 70.1406C30.5039 70.6855 30.8262 71.4385 30.8496 72.3994V76.7764C30.8496 77.6494 30.9609 78.3438 31.1836 78.8594V79H29.4785ZM26.7803 77.7607C27.29 77.7607 27.7734 77.6289 28.2305 77.3652C28.6875 77.1016 29.0186 76.7588 29.2236 76.3369V74.3857H27.9492C25.957 74.3857 24.9609 74.9688 24.9609 76.1348C24.9609 76.6445 25.1309 77.043 25.4707 77.3301C25.8105 77.6172 26.2471 77.7607 26.7803 77.7607ZM35.6045 67.1875V69.4902H37.3799V70.7471H35.6045V76.6445C35.6045 77.0254 35.6836 77.3125 35.8418 77.5059C36 77.6934 36.2695 77.7871 36.6504 77.7871C36.8379 77.7871 37.0957 77.752 37.4238 77.6816V79C36.9961 79.1172 36.5801 79.1758 36.1758 79.1758C35.4492 79.1758 34.9014 78.9561 34.5322 78.5166C34.1631 78.0771 33.9785 77.4531 33.9785 76.6445V70.7471H32.2471V69.4902H33.9785V67.1875H35.6045ZM41.0537 79H39.4277V69.4902H41.0537V79ZM39.2959 66.9678C39.2959 66.7041 39.375 66.4814 39.5332 66.2998C39.6973 66.1182 39.9375 66.0273 40.2539 66.0273C40.5703 66.0273 40.8105 66.1182 40.9746 66.2998C41.1387 66.4814 41.2207 66.7041 41.2207 66.9678C41.2207 67.2314 41.1387 67.4512 40.9746 67.627C40.8105 67.8027 40.5703 67.8906 40.2539 67.8906C39.9375 67.8906 39.6973 67.8027 39.5332 67.627C39.375 67.4512 39.2959 67.2314 39.2959 66.9678ZM45.2021 69.4902L45.2549 70.6855C45.9814 69.7715 46.9307 69.3145 48.1025 69.3145C50.1123 69.3145 51.126 70.4482 51.1436 72.7158V79H49.5176V72.707C49.5117 72.0215 49.3535 71.5146 49.043 71.1865C48.7383 70.8584 48.2607 70.6943 47.6104 70.6943C47.083 70.6943 46.6201 70.835 46.2217 71.1162C45.8232 71.3975 45.5127 71.7666 45.29 72.2236V79H43.6641V69.4902H45.2021ZM53.209 74.166C53.209 72.6836 53.5518 71.5059 54.2373 70.6328C54.9229 69.7539 55.8311 69.3145 56.9619 69.3145C58.1221 69.3145 59.0273 69.7246 59.6777 70.5449L59.7568 69.4902H61.2422V78.7715C61.2422 80.002 60.876 80.9717 60.1436 81.6807C59.417 82.3896 58.4385 82.7441 57.208 82.7441C56.5225 82.7441 55.8516 82.5977 55.1953 82.3047C54.5391 82.0117 54.0381 81.6104 53.6924 81.1006L54.5361 80.125C55.2334 80.9863 56.0859 81.417 57.0938 81.417C57.8848 81.417 58.5 81.1943 58.9395 80.749C59.3848 80.3037 59.6074 79.6768 59.6074 78.8682V78.0508C58.957 78.8008 58.0693 79.1758 56.9443 79.1758C55.8311 79.1758 54.9287 78.7275 54.2373 77.8311C53.5518 76.9346 53.209 75.7129 53.209 74.166ZM54.8438 74.3506C54.8438 75.4229 55.0635 76.2666 55.5029 76.8818C55.9424 77.4912 56.5576 77.7959 57.3486 77.7959C58.374 77.7959 59.127 77.3301 59.6074 76.3984V72.0566C59.1094 71.1484 58.3623 70.6943 57.3662 70.6943C56.5752 70.6943 55.957 71.002 55.5117 71.6172C55.0664 72.2324 54.8438 73.1436 54.8438 74.3506ZM64.0283 80.0986H62.6309L67.9746 66.2031H69.3633L64.0283 80.0986ZM78.4424 75.6602H73.0811L71.877 79H70.1367L75.0234 66.2031H76.5L81.3955 79H79.6641L78.4424 75.6602ZM73.5908 74.2715H77.9414L75.7617 68.2861L73.5908 74.2715ZM92.4258 74.9395C92.2676 76.293 91.7666 77.3389 90.9229 78.0771C90.085 78.8096 88.9688 79.1758 87.5742 79.1758C86.0625 79.1758 84.8496 78.6338 83.9355 77.5498C83.0273 76.4658 82.5732 75.0156 82.5732 73.1992V71.9688C82.5732 70.7793 82.7842 69.7334 83.2061 68.8311C83.6338 67.9287 84.2373 67.2373 85.0166 66.7568C85.7959 66.2705 86.6982 66.0273 87.7236 66.0273C89.083 66.0273 90.1729 66.4082 90.9932 67.1699C91.8135 67.9258 92.291 68.9746 92.4258 70.3164H90.7295C90.583 69.2969 90.2637 68.5586 89.7715 68.1016C89.2852 67.6445 88.6025 67.416 87.7236 67.416C86.6455 67.416 85.7988 67.8145 85.1836 68.6113C84.5742 69.4082 84.2695 70.542 84.2695 72.0127V73.252C84.2695 74.6406 84.5596 75.7451 85.1396 76.5654C85.7197 77.3857 86.5312 77.7959 87.5742 77.7959C88.5117 77.7959 89.2295 77.585 89.7275 77.1631C90.2314 76.7354 90.5654 75.9941 90.7295 74.9395H92.4258ZM8.71875 104.085H3.17285V108.62H9.61523V110H1.48535V97.2031H9.52734V98.5918H3.17285V102.705H8.71875V104.085ZM13.2275 110H11.6016V96.5H13.2275V110ZM19.7842 110.176C18.4951 110.176 17.4463 109.754 16.6377 108.91C15.8291 108.061 15.4248 106.927 15.4248 105.509V105.21C15.4248 104.267 15.6035 103.426 15.9609 102.688C16.3242 101.943 16.8281 101.363 17.4727 100.947C18.123 100.525 18.8262 100.314 19.582 100.314C20.8184 100.314 21.7793 100.722 22.4648 101.536C23.1504 102.351 23.4932 103.517 23.4932 105.034V105.711H17.0508C17.0742 106.648 17.3467 107.407 17.8682 107.987C18.3955 108.562 19.0635 108.849 19.8721 108.849C20.4463 108.849 20.9326 108.731 21.3311 108.497C21.7295 108.263 22.0781 107.952 22.377 107.565L23.3701 108.339C22.5732 109.563 21.3779 110.176 19.7842 110.176ZM19.582 101.65C18.9258 101.65 18.375 101.891 17.9297 102.371C17.4844 102.846 17.209 103.514 17.1035 104.375H21.8672V104.252C21.8203 103.426 21.5977 102.787 21.1992 102.336C20.8008 101.879 20.2617 101.65 19.582 101.65ZM29.1973 108.849C29.7773 108.849 30.2842 108.673 30.7178 108.321C31.1514 107.97 31.3916 107.53 31.4385 107.003H32.9766C32.9473 107.548 32.7598 108.066 32.4141 108.559C32.0684 109.051 31.6055 109.443 31.0254 109.736C30.4512 110.029 29.8418 110.176 29.1973 110.176C27.9023 110.176 26.8711 109.745 26.1035 108.884C25.3418 108.017 24.9609 106.833 24.9609 105.333V105.061C24.9609 104.135 25.1309 103.312 25.4707 102.591C25.8105 101.87 26.2969 101.311 26.9297 100.912C27.5684 100.514 28.3213 100.314 29.1885 100.314C30.2549 100.314 31.1396 100.634 31.8428 101.272C32.5518 101.911 32.9297 102.74 32.9766 103.76H31.4385C31.3916 103.145 31.1572 102.641 30.7354 102.248C30.3193 101.85 29.8037 101.65 29.1885 101.65C28.3623 101.65 27.7207 101.949 27.2637 102.547C26.8125 103.139 26.5869 103.997 26.5869 105.122V105.43C26.5869 106.525 26.8125 107.369 27.2637 107.961C27.7148 108.553 28.3594 108.849 29.1973 108.849ZM37.0107 98.1875V100.49H38.7861V101.747H37.0107V107.645C37.0107 108.025 37.0898 108.312 37.248 108.506C37.4062 108.693 37.6758 108.787 38.0566 108.787C38.2441 108.787 38.502 108.752 38.8301 108.682V110C38.4023 110.117 37.9863 110.176 37.582 110.176C36.8555 110.176 36.3076 109.956 35.9385 109.517C35.5693 109.077 35.3848 108.453 35.3848 107.645V101.747H33.6533V100.49H35.3848V98.1875H37.0107ZM45.29 101.949C45.0439 101.908 44.7773 101.888 44.4902 101.888C43.4238 101.888 42.7002 102.342 42.3193 103.25V110H40.6934V100.49H42.2754L42.3018 101.589C42.835 100.739 43.5908 100.314 44.5693 100.314C44.8857 100.314 45.126 100.355 45.29 100.438V101.949ZM48.5596 110H46.9336V100.49H48.5596V110ZM46.8018 97.9678C46.8018 97.7041 46.8809 97.4814 47.0391 97.2998C47.2031 97.1182 47.4434 97.0273 47.7598 97.0273C48.0762 97.0273 48.3164 97.1182 48.4805 97.2998C48.6445 97.4814 48.7266 97.7041 48.7266 97.9678C48.7266 98.2314 48.6445 98.4512 48.4805 98.627C48.3164 98.8027 48.0762 98.8906 47.7598 98.8906C47.4434 98.8906 47.2031 98.8027 47.0391 98.627C46.8809 98.4512 46.8018 98.2314 46.8018 97.9678ZM54.9844 108.849C55.5645 108.849 56.0713 108.673 56.5049 108.321C56.9385 107.97 57.1787 107.53 57.2256 107.003H58.7637C58.7344 107.548 58.5469 108.066 58.2012 108.559C57.8555 109.051 57.3926 109.443 56.8125 109.736C56.2383 110.029 55.6289 110.176 54.9844 110.176C53.6895 110.176 52.6582 109.745 51.8906 108.884C51.1289 108.017 50.748 106.833 50.748 105.333V105.061C50.748 104.135 50.918 103.312 51.2578 102.591C51.5977 101.87 52.084 101.311 52.7168 100.912C53.3555 100.514 54.1084 100.314 54.9756 100.314C56.042 100.314 56.9268 100.634 57.6299 101.272C58.3389 101.911 58.7168 102.74 58.7637 103.76H57.2256C57.1787 103.145 56.9443 102.641 56.5225 102.248C56.1064 101.85 55.5908 101.65 54.9756 101.65C54.1494 101.65 53.5078 101.949 53.0508 102.547C52.5996 103.139 52.374 103.997 52.374 105.122V105.43C52.374 106.525 52.5996 107.369 53.0508 107.961C53.502 108.553 54.1465 108.849 54.9844 108.849ZM62.3584 110H60.7324V100.49H62.3584V110ZM60.6006 97.9678C60.6006 97.7041 60.6797 97.4814 60.8379 97.2998C61.002 97.1182 61.2422 97.0273 61.5586 97.0273C61.875 97.0273 62.1152 97.1182 62.2793 97.2998C62.4434 97.4814 62.5254 97.7041 62.5254 97.9678C62.5254 98.2314 62.4434 98.4512 62.2793 98.627C62.1152 98.8027 61.875 98.8906 61.5586 98.8906C61.2422 98.8906 61.002 98.8027 60.8379 98.627C60.6797 98.4512 60.6006 98.2314 60.6006 97.9678ZM70.8398 110C70.7461 109.812 70.6699 109.479 70.6113 108.998C69.8555 109.783 68.9531 110.176 67.9043 110.176C66.9668 110.176 66.1963 109.912 65.5928 109.385C64.9951 108.852 64.6963 108.178 64.6963 107.363C64.6963 106.373 65.0713 105.605 65.8213 105.061C66.5771 104.51 67.6377 104.234 69.0029 104.234H70.585V103.487C70.585 102.919 70.415 102.468 70.0752 102.134C69.7354 101.794 69.2344 101.624 68.5723 101.624C67.9922 101.624 67.5059 101.771 67.1133 102.063C66.7207 102.356 66.5244 102.711 66.5244 103.127H64.8896C64.8896 102.652 65.0566 102.195 65.3906 101.756C65.7305 101.311 66.1875 100.959 66.7617 100.701C67.3418 100.443 67.9775 100.314 68.6689 100.314C69.7646 100.314 70.623 100.59 71.2441 101.141C71.8652 101.686 72.1875 102.438 72.2109 103.399V107.776C72.2109 108.649 72.3223 109.344 72.5449 109.859V110H70.8398ZM68.1416 108.761C68.6514 108.761 69.1348 108.629 69.5918 108.365C70.0488 108.102 70.3799 107.759 70.585 107.337V105.386H69.3105C67.3184 105.386 66.3223 105.969 66.3223 107.135C66.3223 107.645 66.4922 108.043 66.832 108.33C67.1719 108.617 67.6084 108.761 68.1416 108.761ZM76.2979 100.49L76.3506 101.686C77.0771 100.771 78.0264 100.314 79.1982 100.314C81.208 100.314 82.2217 101.448 82.2393 103.716V110H80.6133V103.707C80.6074 103.021 80.4492 102.515 80.1387 102.187C79.834 101.858 79.3564 101.694 78.7061 101.694C78.1787 101.694 77.7158 101.835 77.3174 102.116C76.9189 102.397 76.6084 102.767 76.3857 103.224V110H74.7598V100.49H76.2979Z" fill="black"/>
                </svg>
                <%= link_to "Add an expense", new_task_path, class:"btn btn-primary" %>
              </div>
            </div>
            <div class="card">
              <div class="card-body">
                <% if unit.user != nil %>
                  <h5 class="card-title">Tenant</h5>
                  <p class="card-text"><%= unit.user.first_name %> <%= unit.user.last_name %></p>
                  <p class="card-text"><%= unit.user.email %></p>
                  <%= link_to "Edit tenant", edit_tenant_path(unit.user), class:"btn btn-primary"%>
                <% else %>
                  <h5 class="card-title">No tenant</h5>
                  <%= link_to "Add a tenant", new_tenant_path %>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
      <% end %>
      </div>

      <div class="building-btn">
        <p><%= link_to "Add a unit", new_building_unit_path(building, {from: "building_show"}), class: "btn btn-primary" %></p>
      </div>
        <p class=""> <%= link_to "edit this building", edit_building_path(building), class:"btn btn-secondary btn-sm"%> <%= link_to "delete this building", building_path(building), data: { confirm: "Are you sure to delete #{building.address} ?" }, method: :delete, class:"btn btn-danger btn-sm" %></p>
    </div>
<% end %>
